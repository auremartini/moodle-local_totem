define("local_totem/get_ajax_totemtable",["jquery","core/ajax","core/templates","core/notification"],(function($,ajax,templates,notification){return{load:function(date,offset,limit,skipweekend,logo,template){if(offset==limit&&(offset=0),0==offset&&(date=parseInt(Date.now()/1e3)),1===template)template="local_totem/totem_table_fullscreen_1";else template="local_totem/totem_table_fullscreen";ajax.call([{methodname:"local_totem_get_totemtable",args:{date:date,offset:offset,skipweekend:skipweekend,logo:logo}}])[0].done((function(response){templates.render(template,response).done((function(html){$('[data-region="totem_fullscreen"]').replaceWith(html);var h=$('[data-region="totem_fullscreen"]').height();h-=$('[data-region="totem_fullscreen-title"]').height(),h-=$('[data-region="totem_fullscreen-msg"]').height(),$('[data-region="totem_fullscreen-scroll"]').css("height",h+"px"),$('[data-region="totem_fullscreen-scroll"]').css("overflow","hidden"),$('[data-region="totem_fullscreen-table"]').removeClass("hidden");var scrollItemIndex=0,scrollTimeInterval=setInterval((function(){var row=$('[data-region="totem_fullscreen-table-row"]');row.length>0&&(row[scrollItemIndex].scrollIntoView(),scrollItemIndex++),row.length==scrollItemIndex&&(clearTimeout(scrollTimeInterval),setTimeout((function(){$('[data-region="totem_fullscreen"]').innerHTML='<p style="text-align: center"><img src="pix/loading.gif" alt="loading..." width="16px"></p>',require(["local_totem/get_ajax_totemtable"],(function(totemtable){totemtable.load(date,offset+1,limit,skipweekend,logo)}))}),2e3))}),2e3)})).fail(notification.exception)})).fail(notification.exception)}}}));

//# sourceMappingURL=get_ajax_totemtable.min.js.map