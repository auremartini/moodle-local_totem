/**
 * Local plugin "Totem: show teacher's attendences and event totem" - Version file
 *
 * @package    local_totem
 * @copyright  2022, Aureliano Martini (Liceo cantonale di Lugano 2) <aureliano.martini@edu.ti.ch>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_totem/event_edit_form_dynamics",["jquery"],(function(){return{init:function(params){var option,element;(document.getElementById("id_eventtypelist").innerHTML="",(option=document.createElement("option")).value="",option.text="",document.getElementById("id_eventtypelist").add(option),params.eventtypelist.split("\n").forEach((function(item){var params=item.split("|"),option=document.createElement("option");option.value=params[0],option.text=params[1],option.style=params[2],document.getElementById("id_eventtypelist").add(option)})),document.getElementById("id_eventtypelist").addEventListener("change",(function(){document.getElementsByName("eventtype")[0].value=document.getElementById("id_eventtypelist").value})),""!=document.getElementsByName("eventtype")[0].value)&&((element=document.getElementById("id_eventtypelist")).value=document.getElementsByName("eventtype")[0].value,element.dispatchEvent(new Event("change")));(require(["jquery","core/ajax","core/notification"],(function($,ajax,notification){ajax.call([{methodname:"local_totem_get_userlist",args:{source:parseInt(params.source+""),sourceid:parseInt(params.sourceid+"")}}])[0].done((function(response){document.getElementById("id_useridlist").innerHTML="";var option=document.createElement("option");if(option.value="",option.text="",document.getElementById("id_useridlist").add(option),response.forEach((function(item){var option=document.createElement("option");option.value=item.id,option.text=item.lastname+" "+item.firstname,document.getElementById("id_useridlist").add(option)})),document.getElementById("id_useridlist").addEventListener("change",(function(){document.getElementsByName("userid")[0].value=document.getElementById("id_useridlist").value,""!=document.getElementsByName("teaching")[0].value&&(document.getElementsByName("teaching")[0].value="-"),ajax.call([{methodname:"local_totem_get_teachinglist",args:{blockteachings:String(params.blockteachings),teacherid:parseInt(document.getElementById("id_useridlist").value+"")}}])[0].done((function(response2){document.getElementById("id_teachinglist").innerHTML="";var option=document.createElement("option");if(option.value="",option.text="",document.getElementById("id_teachinglist").add(option),response2.forEach((function(item){var option=document.createElement("option");option.value=item.id,option.text=item.name,document.getElementById("id_teachinglist").add(option)})),"0"==document.getElementsByName("id")[0].value)response2.length>0&&(document.getElementsByName("teaching")[0].value=response2[0].id,document.getElementById("id_teachinglist").value=response2[0].id);else{var d=document.getElementById("id_teachinglist");""==document.getElementsByName("teaching")[0].value?d.value=document.getElementsByName("teaching")[0].value:(d.value=document.getElementsByName("teaching")[0].value,""==document.getElementById("id_teachinglist").value&&(document.getElementsByName("teaching")[0].value=response2[0].id,document.getElementById("id_teachinglist").value=response2[0].id))}document.getElementById("id_teachinglist").addEventListener("change",(function(){document.getElementsByName("teaching")[0].value=document.getElementById("id_teachinglist").value}),!1)})).fail(notification.exception)}),!1),""!=document.getElementsByName("userid")[0].value){var element=document.getElementById("id_useridlist");element.value=document.getElementsByName("userid")[0].value,element.dispatchEvent(new Event("change"))}})).fail(notification.exception)})),document.getElementById("id_timestartlist").innerHTML="",(option=document.createElement("option")).value=0,option.text="",document.getElementById("id_timestartlist").add(option),params.timetable.split("\n").forEach((function(item){var params=item.split("|"),option=document.createElement("option");option.value=params[0],option.text=params[1],document.getElementById("id_timestartlist").add(option)})),document.getElementById("id_timestartlist").addEventListener("change",(function(){document.getElementsByName("timestart")[0].value=document.getElementById("id_timestartlist").value})),""!=document.getElementsByName("timestart")[0].value)&&((element=document.getElementById("id_timestartlist")).value=document.getElementsByName("timestart")[0].value,element.dispatchEvent(new Event("change")));(document.getElementById("id_timestartlist").addEventListener("change",(function(){for(var tstart=document.getElementById("id_timestartlist"),tend=document.getElementById("id_timeendlist"),i=0;i<tend.options.length;i++)0==i?tend.options[i].style="":i<tstart.value?tend.options[i].style="display: none":tend.options[i].style="";tend.value<=tstart.value&&(tend.value=parseInt(tstart.value),tend.dispatchEvent(new Event("change")))}),!1),document.getElementById("id_timeendlist").innerHTML="",(option=document.createElement("option")).value="",option.text="",document.getElementById("id_timeendlist").add(option),params.timetable.split("\n").forEach((function(item){var params=item.split("|"),option=document.createElement("option");option.value=params[0],option.text=params[2],document.getElementById("id_timeendlist").add(option)})),document.getElementById("id_timeendlist").addEventListener("change",(function(){document.getElementsByName("timeend")[0].value=document.getElementById("id_timeendlist").value})),""!=document.getElementsByName("timeend")[0].value)&&((element=document.getElementById("id_timeendlist")).value=document.getElementsByName("timeend")[0].value,element.dispatchEvent(new Event("change")));document.getElementById("id_timestartlist").dispatchEvent(new Event("change"))}}}));

//# sourceMappingURL=event_edit_form_dynamics.min.js.map